
<RegisterScreen>:
    #md_bg_color: self.theme_cls.backgroundColor # Comentado para 1.1.1
    #md_bg_color: self.theme_cls.onPrimaryColor # Comentado para 1.1.1

    MDBoxLayout:
        orientation: 'vertical'

        # IMAGEN
        MDBoxLayout:
            size_hint_y: 0.33
            
            # Usando Image en lugar de FitImage (FitImage no es estándar en 1.1.1)
            Image:
                source: "assets/images/pk.png"
                size_hint_y: None
                height: dp(280) # Usar dp para la altura
                allow_stretch: True

        # CONTENIDO - Cambiado a MDCard para admitir radio y elevación
        MDCard:
            orientation: "vertical"
            size_hint_y: 0.51
            height: self.minimum_height
            padding: dp(16)
            spacing: dp(10)
            pos_hint: {"center_x": .5, "y": 0} # Pegar a la parte inferior
            radius: dp(36), dp(36), 0, 0 # Radio solo en las esquinas superiores
            #md_bg_color: self.theme_cls.backgroundColor # Comentado para 1.1.1
            #md_bg_color: self.theme_cls.onPrimaryColor # Comentado para 1.1.1
            elevation: 0

            # Primario - Cambiado a MDCard para admitir radio
            MDCard:
                orientation: 'vertical'
                spacing: dp(10)
                padding: dp(10)
                adaptive_height: True
                #md_bg_color: app.theme_cls.onPrimaryFixedColor # Comentado para 1.1.1
                radius: dp(15), dp(15), dp(15), dp(15)

                MDTextField:
                    id: username_input
                    # 'mode' property removed as it's 2.x specific for outlined style
                    hint_text: "Nombre de usuario" 

                MDTextField:
                    id: password_input
                    password: True
                    # 'mode' property removed
                    hint_text: "Contraseña" 

                MDTextField:
                    id: confirm_password_input
                    password: True
                    # 'mode' property removed
                    hint_text: "Confirmar Contraseña"

                Label:
                    text: root.error_message
                    color: (1, 0, 0, 1)
                    size_hint_y: None
                    height: dp(30) # Usar dp para la altura
                    
                Label:
                    text: root.success_message
                    color: (0, 0.7, 0, 1)
                    size_hint_y: None
                    height: dp(30) # Usar dp para la altura

                # Cambiado a MDRaisedButton para un estilo de botón relleno
                MDRaisedButton:
                    #style: "tonal" # Comentado, 'style' es 2.x
                    #style: "filled" # Comentado, 'style' es 2.x
                    pos_hint: {"center_x": .5, "center_y": .5}
                    #theme_width: "Custom" # Comentado, 'theme_width' es 2.x
                    height: dp(56) # Usar dp para la altura
                    size_hint_x: .5
                    on_press: root.attempt_register()
                    text: "Registrarse" # Texto establecido directamente en el botón

                # Cambiado a MDFlatButton para un estilo de botón "tonal" (más cercano a flat en 1.1.1)
                MDFlatButton: # Usar MDFlatButton para el estilo "tonal"
                    #style: "filled" # Comentado, 'style' es 2.x
                    #style: "tonal" # Comentado, 'style' es 2.x
                    pos_hint: {"center_x": .5, "center_y": .5}
                    on_press: 
                        root.reset_form()
                        root.manager.current = 'login'
                    text: "Volver" # Texto establecido directamente en el botón