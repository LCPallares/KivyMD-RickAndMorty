# Incluir sub-archivos KV
#:include views/auth/login.kv
#:include views/auth/register.kv

#:include views/characters/characters_list.kv
#:include views/favorites/favorites_list.kv

#:import NoTransition kivy.uix.screenmanager.NoTransition

MDScreen:
    id: root_kv
    md_bg_color: self.theme_cls.secondaryContainerColor

    MDNavigationLayout:

        ScreenManager:
            id: screen_manager
            transition: NoTransition()

        # PANEL LATERAL
        MDNavigationDrawer:
            id: nav_drawer
            radius: 0, dp(16), dp(16), 0

            MDNavigationDrawerMenu:

                MDNavigationDrawerHeader:
                    padding: "0dp",  0, "0dp", "0dp"
                    spacing: "0dp" 
                    #size_hint_y: None
                    #height: self.minimum_height
                    #adaptive_height: True
                    height: "100dp"

                    FitImage:
                        source: "assets/images/name_logo.png"
                        size_hint_y: None
                        height: "90dp"  # Ajusta el alto de la imagen
                        allow_stretch: True
                        #size_hint_y: 1
                        
                MDNavigationDrawerLabel:
                    text: "poncho6257@hotmail.com"
                    theme_text_color: "Custom"
                    text_color: self.theme_cls.primaryColor

                MDNavigationDrawerItem:
                    on_press: screen_manager.current = 'characters_list'
                    MDNavigationDrawerItemLeadingIcon:
                        icon: "home"
                    MDNavigationDrawerItemText:
                        text: "Home"
                    #MDNavigationDrawerItemTrailingText:
                    #    text: "24"

                MDNavigationDrawerDivider:

                MDNavigationDrawerItem:
                    MDNavigationDrawerItemLeadingIcon:
                        icon: "magnify"
                    MDNavigationDrawerItemText:
                        text: "Search"

                MDNavigationDrawerItem:
                    on_press: screen_manager.current = 'favorites_list'
                    MDNavigationDrawerItemLeadingIcon:
                        icon: "cards-heart"
                    MDNavigationDrawerItemText:
                        text: "Favorites"

                MDNavigationDrawerItem:
                    MDNavigationDrawerItemLeadingIcon:
                        icon: "cog"
                    MDNavigationDrawerItemText:
                        text: "Settings"

                MDNavigationDrawerItem:
                    on_press:
                        app.auth_controller.logout()
                        screen_manager.current = 'login'
                    MDNavigationDrawerItemLeadingIcon:
                        icon: "login"
                    MDNavigationDrawerItemText:
                        text: "Log Out"

                MDNavigationDrawerItem:
                    on_press: app.stop_app()
                    MDNavigationDrawerItemLeadingIcon:
                        icon: "exit-to-app"
                    MDNavigationDrawerItemText:
                        text: "Close App"

#app.root.current = 'characters_list'
#app.root.current = 'favorites_list'
#app.auth_controller.logout()
#app.root.current = 'login'

#root.manager.current = 'characters_list'
#root.manager.current = 'favorites_list'
#app.auth_controller.logout()
#root.manager.current = 'login'
