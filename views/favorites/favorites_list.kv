<CharactersCard>:
    #source: ""
    #text: ""
    #favorite: {}
    size_hint_y: None
    height: 200  # dp(200) # Usar dp 
    padding: 10 # dp(10) # Usar dp 
    spacing: 10
    orientation: "horizontal"

    FitImage: # Reemplazado FitImage con Image
        source: root.source
        size_hint_x: 0.3
        allow_stretch: True
        keep_ratio: True

    MDLabel:
        text: root.text
        halign: "center"
        #theme_text_color: "Primary" # Comentado, usar text_color si es necesario
        #text_color: app.theme_cls.primary_color # Ejemplo de cómo sería

    MDRaisedButton: # Reemplazado MDButton con MDRaisedButton para estilo "filled" o "tonal"
        id: delete_button
        #style: "tonal" # Comentado, 'style' es 2.x
        pos_hint: {"center_x": .5, "center_y": .5}
        #theme_width: "Custom" # Comentado, 'theme_width' es 2.x
        height: dp(56) # Usar dp
        size_hint_x: .5
        #on_press: root.parent.parent.parent.parent.remove_favorite(root.favorite) # Mantener la lógica, ajustar si la jerarquía cambia
        text: "delete" # Texto directamente en el botón, MDButtonText no existe en 1.1.1


<FavoritesListScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        #padding: dp(10) # Comentado, ajustar si es necesario
        #spacing: dp(10) # Comentado, ajustar si es necesario

        # BARRA SUPERIOR - Adaptado a KivyMD 1.1.1 (MDToolbar)
        MDTopAppBar:
            id: top_app_bar
            title: "Favorites" # Título directo en MDToolbar
            elevation: 2
            # 'type' property is not available in MDToolbar (1.1.1)
            
            # BOTONES IZQ - Usando left_action_items
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("toggle")]]

            # BOTONES DER - Usando right_action_items
            right_action_items: 
                [
                ["magnify", lambda x: app.search_action()], \
                ["filter-variant", lambda x: app.filter_action()], \
                ["dots-vertical", lambda x: app.menu_open(x)] \
                ]

        MDScrollView: # Cambiado de ScrollView a MDScrollView para consistencia KivyMD
            do_scroll_x: False # Asegurar que no haya scroll horizontal
            do_scroll_y: True
            size_hint: (1, 1) # Asegurar que ocupe todo el espacio restante

            MDGridLayout:
                id: favorites_grid
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(10) # Usar dp
                padding: dp(10) # Usar dp
                # Esto se llenará dinámicamente con los favoritos
